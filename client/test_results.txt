
> zero-vault@0.0.0 test:coverage
> vitest run --coverage


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90mC:/Users/kondu/OneDrive/Desktop/B.TECH/6 SEM/Software Engineering/FInal_Project/zero-vault-sprint-1/zero-vault-sprint-1/client[39m
      [2mCoverage enabled with [22m[33mv8[39m

 [32mÎ“Â£Ã´[39m src/shared/sync/sync.service.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 12[2mms[22m[39m
 [32mÎ“Â£Ã´[39m src/shared/utils/passwordStrength.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32mÎ“Â£Ã´[39m src/shared/utils/password.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 14[2mms[22m[39m
 [32mÎ“Â£Ã´[39m src/extension/components/Navigation.test.tsx [2m([22m[2m1 test[22m[2m)[22m[32m 46[2mms[22m[39m
[90mstdout[2m | src/extension/popup/contexts/VaultContext.test.tsx[2m > [22m[2mVaultContext Integration[2m > [22m[2mshould add an entry successfully
[22m[39mInitial fetch success: {
  success: [33mtrue[39m,
  vaultVersion: [33m1[39m,
  encryptedEntries: [],
  deltas: { added: [], updated: [], deleted: [] }
}

[90mstdout[2m | src/extension/popup/contexts/VaultContext.test.tsx[2m > [22m[2mVaultContext Integration[2m > [22m[2mshould add an entry successfully
[22m[39mAuto-triggering syncVault...
Checking for changes... Vault v2 vs Server v1
Entries: [33m1[39m
Calculated Delta: {
  eventId: [32m'e4e7d6ce-7efd-4380-b413-6075e25f53ad'[39m,
  device_id: [90mundefined[39m,
  added: [],
  updated: [
    {
      title: [32m'Test'[39m,
      username: [32m'user'[39m,
      password: [32m'ENC:cHc='[39m,
      id: [33m1772211436781[39m,
      version: [33m2[39m,
      updatedAt: [32m'2026-02-27T16:57:16.781Z'[39m,
      passwordHistory: [],
      isFavorite: [33mfalse[39m,
      isDeleted: [33mfalse[39m
    }
  ],
  deleted: [],
  baseVersion: [33m1[39m
}
Queueing event to outbox: {
  eventId: [32m'e4e7d6ce-7efd-4380-b413-6075e25f53ad'[39m,
  timestamp: [33m1772211436796[39m,
  delta: {
    eventId: [32m'e4e7d6ce-7efd-4380-b413-6075e25f53ad'[39m,
    device_id: [90mundefined[39m,
    added: [],
    updated: [ [36m[Object][39m ],
    deleted: [],
    baseVersion: [33m1[39m
  }
}
Processing outbox event: e4e7d6ce-7efd-4380-b413-6075e25f53ad

[90mstdout[2m | src/extension/popup/contexts/VaultContext.test.tsx[2m > [22m[2mVaultContext Integration[2m > [22m[2mshould add an entry successfully
[22m[39mSync Response Status: [33m200[39m

[90mstdout[2m | src/extension/popup/contexts/VaultContext.test.tsx[2m > [22m[2mVaultContext Integration[2m > [22m[2mshould add an entry successfully
[22m[39mSync Success: {
  success: [33mtrue[39m,
  vaultVersion: [33m2[39m,
  encryptedEntries: [],
  deltas: { added: [], updated: [], deleted: [] }
}

stderr | src/extension/popup/contexts/AuthContext.test.tsx > AuthContext > should handle login failure
An update to ToastProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

[90mstdout[2m | src/extension/popup/contexts/VaultContext.test.tsx[2m > [22m[2mVaultContext Integration[2m > [22m[2mshould mark entry as deleted (tombstone)
[22m[39mInitial fetch success: {
  success: [33mtrue[39m,
  vaultVersion: [33m1[39m,
  encryptedEntries: [],
  deltas: { added: [], updated: [], deleted: [] }
}

[90mstdout[2m | src/extension/popup/contexts/VaultContext.test.tsx[2m > [22m[2mVaultContext Integration[2m > [22m[2mshould mark entry as deleted (tombstone)
[22m[39mAuto-triggering syncVault...
Checking for changes... Vault v2 vs Server v1
Entries: [33m1[39m
Calculated Delta: {
  eventId: [32m'a11d26d9-07cf-4e16-bfed-78892e806f6c'[39m,
  device_id: [90mundefined[39m,
  added: [],
  updated: [
    {
      title: [32m'Test'[39m,
      username: [32m'user'[39m,
      password: [32m'ENC:cHc='[39m,
      id: [33m1772211436824[39m,
      version: [33m2[39m,
      updatedAt: [32m'2026-02-27T16:57:16.824Z'[39m,
      passwordHistory: [],
      isFavorite: [33mfalse[39m,
      isDeleted: [33mfalse[39m
    }
  ],
  deleted: [],
  baseVersion: [33m1[39m
}
Queueing event to outbox: {
  eventId: [32m'a11d26d9-07cf-4e16-bfed-78892e806f6c'[39m,
  timestamp: [33m1772211436829[39m,
  delta: {
    eventId: [32m'a11d26d9-07cf-4e16-bfed-78892e806f6c'[39m,
    device_id: [90mundefined[39m,
    added: [],
    updated: [ [36m[Object][39m ],
    deleted: [],
    baseVersion: [33m1[39m
  }
}
Processing outbox event: a11d26d9-07cf-4e16-bfed-78892e806f6c

[90mstdout[2m | src/extension/popup/contexts/VaultContext.test.tsx[2m > [22m[2mVaultContext Integration[2m > [22m[2mshould mark entry as deleted (tombstone)
[22m[39mSync Response Status: [33m200[39m

[90mstdout[2m | src/extension/popup/contexts/VaultContext.test.tsx[2m > [22m[2mVaultContext Integration[2m > [22m[2mshould mark entry as deleted (tombstone)
[22m[39mSync Success: {
  success: [33mtrue[39m,
  vaultVersion: [33m2[39m,
  encryptedEntries: [],
  deltas: { added: [], updated: [], deleted: [] }
}

[90mstdout[2m | src/extension/popup/contexts/VaultContext.test.tsx[2m > [22m[2mVaultContext Integration[2m > [22m[2mshould mark entry as deleted (tombstone)
[22m[39mAuto-triggering syncVault...
Checking for changes... Vault v3 vs Server v2
Entries: [33m1[39m
Calculated Delta: {
  eventId: [32m'a18f5f69-a563-4ed9-b79a-1387b453040b'[39m,
  device_id: [90mundefined[39m,
  added: [],
  updated: [
    {
      title: [32m'Test'[39m,
      username: [32m'user'[39m,
      password: [32m'ENC:cHc='[39m,
      id: [33m1772211436824[39m,
      version: [33m3[39m,
      updatedAt: [32m'2026-02-27T16:57:16.843Z'[39m,
      passwordHistory: [],
      isFavorite: [33mfalse[39m,
      isDeleted: [33mtrue[39m,
      deletedAt: [32m'2026-02-27T16:57:16.843Z'[39m
    }
  ],
  deleted: [],
  baseVersion: [33m2[39m
}
Queueing event to outbox: {
  eventId: [32m'a18f5f69-a563-4ed9-b79a-1387b453040b'[39m,
  timestamp: [33m1772211436851[39m,
  delta: {
    eventId: [32m'a18f5f69-a563-4ed9-b79a-1387b453040b'[39m,
    device_id: [90mundefined[39m,
    added: [],
    updated: [ [36m[Object][39m ],
    deleted: [],
    baseVersion: [33m2[39m
  }
}

[90mstdout[2m | src/extension/popup/contexts/VaultContext.test.tsx[2m > [22m[2mVaultContext Integration[2m > [22m[2mshould mark entry as deleted (tombstone)
[22m[39mProcessing outbox event: a18f5f69-a563-4ed9-b79a-1387b453040b

[90mstdout[2m | src/extension/popup/contexts/VaultContext.test.tsx[2m > [22m[2mVaultContext Integration[2m > [22m[2mshould mark entry as deleted (tombstone)
[22m[39mSync Response Status: [33m200[39m

[90mstdout[2m | src/extension/popup/contexts/VaultContext.test.tsx[2m > [22m[2mVaultContext Integration[2m > [22m[2mshould mark entry as deleted (tombstone)
[22m[39mSync Success: {
  success: [33mtrue[39m,
  vaultVersion: [33m3[39m,
  encryptedEntries: [],
  deltas: { added: [], updated: [], deleted: [] }
}

[90mstdout[2m | src/extension/popup/contexts/VaultContext.test.tsx[2m > [22m[2mVaultContext Integration[2m > [22m[2mshould queue changes to outbox when offline
[22m[39mAuto-triggering syncVault...
Checking for changes... Vault v1 vs Server v0
Entries: [33m1[39m
Calculated Delta: {
  eventId: [32m'58245ce3-e14b-4679-a8f3-6fc8df8efe53'[39m,
  device_id: [90mundefined[39m,
  added: [],
  updated: [
    {
      title: [32m'Test'[39m,
      username: [32m'user'[39m,
      password: [32m'ENC:cHc='[39m,
      id: [33m1772211436870[39m,
      version: [33m1[39m,
      updatedAt: [32m'2026-02-27T16:57:16.870Z'[39m,
      passwordHistory: [],
      isFavorite: [33mfalse[39m,
      isDeleted: [33mfalse[39m
    }
  ],
  deleted: [],
  baseVersion: [33m0[39m
}
Queueing event to outbox: {
  eventId: [32m'58245ce3-e14b-4679-a8f3-6fc8df8efe53'[39m,
  timestamp: [33m1772211436874[39m,
  delta: {
    eventId: [32m'58245ce3-e14b-4679-a8f3-6fc8df8efe53'[39m,
    device_id: [90mundefined[39m,
    added: [],
    updated: [ [36m[Object][39m ],
    deleted: [],
    baseVersion: [33m0[39m
  }
}

 [32mÎ“Â£Ã´[39m src/extension/popup/contexts/AuthContext.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[32m 113[2mms[22m[39m
 [32mÎ“Â£Ã´[39m src/extension/popup/contexts/VaultContext.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[32m 153[2mms[22m[39m

[2m Test Files [22m [1m[32m6 passed[39m[22m[90m (6)[39m
[2m      Tests [22m [1m[32m25 passed[39m[22m[90m (25)[39m
[2m   Start at [22m 22:27:14
[2m   Duration [22m 2.36s[2m (transform 567ms, setup 1.31s, import 2.08s, tests 343ms, environment 4.70s)[22m

[34m % [39m[2mCoverage report from [22m[33mv8[39m
-------------------|---------|----------|---------|---------|-------------------
File               | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
-------------------|---------|----------|---------|---------|-------------------
All files          |   68.48 |    58.04 |   70.83 |   69.72 |                   
 ...ion/components |   72.72 |    66.66 |      50 |   72.72 |                   
  Navigation.tsx   |   72.72 |    66.66 |      50 |   72.72 | 29-30,39          
 ...popup/contexts |   66.44 |    52.05 |      75 |   68.11 |                   
  AuthContext.tsx  |   69.49 |       50 |   77.77 |   71.42 | 49-51,96-125      
  ToastContext.tsx |   69.69 |    57.14 |   58.33 |   73.33 | ...,74-76,100,120 
  VaultContext.tsx |   65.07 |    51.75 |   80.64 |   66.31 | ...65-366,374-375 
 shared/sync       |   59.61 |    55.55 |   53.84 |   63.04 |                   
  ...to.service.ts |    37.5 |        0 |      50 |   42.85 | 51-56             
  sync.service.ts  |   63.63 |       60 |   54.54 |   66.66 | ...,93,99,111-123 
 shared/utils      |   94.87 |     92.3 |     100 |   96.29 |                   
  ...dGenerator.ts |   94.73 |       90 |     100 |   92.85 | 15                
  ...rdStrength.ts |      95 |    93.75 |     100 |     100 | 57                
-------------------|---------|----------|---------|---------|-------------------
