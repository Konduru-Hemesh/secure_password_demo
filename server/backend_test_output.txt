  console.error
    Get Vault Error: TypeError: Cannot read properties of undefined (reading 'select')
        at C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\src\routes\vault.ts:19:13
        at Layer.handleRequest (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\lib\layer.js:152:17)
        at next (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\lib\route.js:157:13)
        at authMiddleware (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\src\middleware\auth.ts:20:9)
        at Layer.handleRequest (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\lib\layer.js:152:17)
        at next (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\lib\route.js:157:13)
        at Route.dispatch (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\lib\route.js:117:3)
        at handle (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\index.js:435:11)
        at Layer.handleRequest (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\lib\layer.js:152:17)
        at C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\index.js:295:15
        at processParams (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\index.js:582:12)
        at next (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\index.js:291:5)
        at Function.handle (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\index.js:186:3)
        at router (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\index.js:60:12)
        at Layer.handleRequest (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\lib\layer.js:152:17)
        at trimPrefix (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\index.js:342:13)
        at C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\index.js:297:9
        at processParams (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\index.js:582:12)
        at next (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\index.js:291:5)
        at read (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\body-parser\lib\read.js:53:5)
        at jsonParser (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\body-parser\lib\types\json.js:88:5)
        at Layer.handleRequest (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\lib\layer.js:152:17)
        at trimPrefix (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\index.js:342:13)
        at C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\index.js:297:9
        at processParams (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\index.js:582:12)
        at next (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\index.js:291:5)
        at cors (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\cors\lib\index.js:188:7)
        at C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\cors\lib\index.js:224:17
        at originCallback (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\cors\lib\index.js:214:15)
        at C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\cors\lib\index.js:219:13
        at optionsCallback (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\cors\lib\index.js:199:9)
        at corsMiddleware (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\cors\lib\index.js:204:7)
        at Layer.handleRequest (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\lib\layer.js:152:17)
        at trimPrefix (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\index.js:342:13)
        at C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\index.js:297:9
        at processParams (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\index.js:582:12)
        at next (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\index.js:291:5)
        at Function.handle (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\index.js:186:3)
        at Function.handle (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\express\lib\application.js:177:15)
        at Server.app (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\express\lib\express.js:38:9)
        at Server.emit (node:events:518:28)
        at parserOnIncoming (node:_http_server:1137:12)
        at HTTPParser.parserOnHeadersComplete (node:_http_common:119:17)

    [0m [90m 60 |[39m         })[33m;[39m
     [90m 61 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 62 |[39m         console[33m.[39merror([32m'Get Vault Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m         res[33m.[39mstatus([35m500[39m)[33m.[39mjson({ error[33m:[39m [32m'Server error'[39m })[33m;[39m
     [90m 64 |[39m     }
     [90m 65 |[39m })[33m;[39m[0m

      at src/routes/vault.ts:62:17
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at authMiddleware (src/middleware/auth.ts:20:9)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at router (node_modules/router/index.js:60:12)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at read (node_modules/body-parser/lib/read.js:53:5)
      at jsonParser (node_modules/body-parser/lib/types/json.js:88:5)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at cors (node_modules/cors/lib/index.js:188:7)
      at node_modules/cors/lib/index.js:224:17
      at originCallback (node_modules/cors/lib/index.js:214:15)
      at node_modules/cors/lib/index.js:219:13
      at optionsCallback (node_modules/cors/lib/index.js:199:9)
      at corsMiddleware (node_modules/cors/lib/index.js:204:7)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at Function.handle (node_modules/express/lib/application.js:177:15)
      at Server.app (node_modules/express/lib/express.js:38:9)

  console.error
    Sync Error: TypeError: Cannot read properties of undefined (reading 'select')
        at C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\src\routes\vault.ts:77:13
        at Layer.handleRequest (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\lib\layer.js:152:17)
        at next (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\lib\route.js:157:13)
        at authMiddleware (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\src\middleware\auth.ts:20:9)
        at Layer.handleRequest (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\lib\layer.js:152:17)
        at next (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\lib\route.js:157:13)
        at Route.dispatch (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\lib\route.js:117:3)
        at handle (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\index.js:435:11)
        at Layer.handleRequest (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\lib\layer.js:152:17)
        at C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\index.js:295:15
        at processParams (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\index.js:582:12)
        at next (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\index.js:291:5)
        at Function.handle (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\index.js:186:3)
        at router (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\index.js:60:12)
        at Layer.handleRequest (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\lib\layer.js:152:17)
        at trimPrefix (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\index.js:342:13)
        at C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\index.js:297:9
        at processParams (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\index.js:582:12)
        at next (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\router\index.js:291:5)
        at C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\body-parser\lib\read.js:171:5
        at AsyncResource.runInAsyncScope (node:async_hooks:206:9)
        at invokeCallback (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\raw-body\index.js:238:16)
        at done (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\raw-body\index.js:227:7)
        at IncomingMessage.onEnd (C:\Users\kondu\OneDrive\Desktop\B.TECH\6 SEM\Software Engineering\FInal_Project\zero-vault-sprint-1\zero-vault-sprint-1\server\node_modules\raw-body\index.js:287:7)
        at IncomingMessage.emit (node:events:518:28)
        at endReadableNT (node:internal/streams/readable:1696:12)
        at processTicksAndRejections (node:internal/process/task_queues:82:21)

    [0m [90m 214 |[39m
     [90m 215 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 216 |[39m         console[33m.[39merror([32m'Sync Error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 217 |[39m         res[33m.[39mstatus([35m500[39m)[33m.[39mjson({ error[33m:[39m [32m'Sync failed'[39m })[33m;[39m
     [90m 218 |[39m     }
     [90m 219 |[39m })[33m;[39m[0m

      at src/routes/vault.ts:216:17
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at authMiddleware (src/middleware/auth.ts:20:9)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at router (node_modules/router/index.js:60:12)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/body-parser/lib/read.js:171:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

FAIL src/routes/vault.test.ts
  Vault API
    GET /api/vault
      â”œÃ¹ should create new sync state if none exists (79 ms)
    POST /api/vault/sync
      â”œÃ¹ should return 409 Conflict when baseVersion != serverVersion (27 ms)

  Î“Ã¹Ã… Vault API Î“Ã‡â•‘ GET /api/vault Î“Ã‡â•‘ should create new sync state if none exists

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      48 |                 .set('Authorization', `Bearer ${token}`);
      49 |
    > 50 |             expect(res.status).toBe(200);
         |                                ^
      51 |             expect(res.body.vaultVersion).toBe(0);
      52 |         });
      53 |     });

      at Object.<anonymous> (src/routes/vault.test.ts:50:32)

  Î“Ã¹Ã… Vault API Î“Ã‡â•‘ POST /api/vault/sync Î“Ã‡â•‘ should return 409 Conflict when baseVersion != serverVersion

    expect(received).toBe(expected) // Object.is equality

    Expected: 409
    Received: 500

      76 |                 .send(delta);
      77 |
    > 78 |             expect(response.status).toBe(409);
         |                                     ^
      79 |             expect(response.body.error).toBe('Sync Conflict');
      80 |             expect(response.body.server_base_version).toBe(10);
      81 |         });

      at Object.<anonymous> (src/routes/vault.test.ts:78:37)

Test Suites: 1 failed, 1 total
Tests:       2 failed, 2 total
Snapshots:   0 total
Time:        2.638 s, estimated 3 s
Ran all test suites.
Force exiting Jest: Have you considered using `--detectOpenHandles` to detect async operations that kept running after all tests finished?
